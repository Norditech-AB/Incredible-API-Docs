---
title: TypeScript SDK
description: Use the Incredible API from TypeScript/JavaScript projects.
sidebarTitle: TypeScript SDK
section: SDKs
---

# @incredible-ai/sdk

TypeScript SDK used for the [Incredible API](https://incredible.one). Supports Anthropic client SDK interface. Swap a single import and keep the rest of your code—function calling, streaming, token counting, and cookbook workflows included.

---

## Table of contents
1. [Features](#features)
2. [Installation](#installation)
3. [Configuration](#configuration)
4. [Quick start](#quick-start)
5. [Messages API](#messages-api)
6. [Function calling](#function-calling)
   - [Manual control](#manual-control)
   - [Automated helper flow](#automated-helper-flow)
   - [Beta tool runner](#beta-tool-runner)
7. [Streaming responses](#streaming-responses)
8. [Token counting](#token-counting)
9. [Text Completions](#text-completions)
10. [Models API](#models-api)
11. [Answer API](#answer-api)
12. [Conversation API](#conversation-api)
13. [Agent API](#agent-api)
14. [Web Search](#web-search)
15. [Deep Research](#deep-research)
16. [Image Generation](#image-generation)
17. [Video Generation](#video-generation)
18. [OCR](#ocr)
19. [Cookbook compatibility](#cookbook-compatibility)
20. [Integrations API](#integrations-api)
21. [Error handling & debugging](#error-handling--debugging)
22. [Helpers reference](#helpers-reference)
23. [Examples](#examples)
24. [Development & contributing](#development--contributing)

---

## Features
- **Anthropic-compatible client** – constructor options and method signatures match Anthropic’s SDK.
- **Tool calling** – send `functions`/`tools`, receive structured tool-use events, and feed results back automatically.
- **Streaming** – async iterators that emit the same chunks Anthropic’s SSE API provides.
- **Helper utilities** – cookbook-style helpers to build `function_call` / `function_call_result` messages.
- **Token counting** – mirror Anthropic’s `countTokens` endpoint (forward-compatible).
- **Cookbook ready** – every scenario in `Incredible-API-Cookbook-main/` runs unchanged with this SDK.

---

## Installation
```bash
npm install @incredible-ai/sdk
# yarn add @incredible-ai/sdk
# pnpm add @incredible-ai/sdk
```

---

## Configuration

| Option        | Env var                  | Default                       |
| ------------- | ------------------------ | ----------------------------- |
| `apiKey`      | `INCREDIBLE_API_KEY`     | *(optional today)*            |
| `baseUrl`     | `INCREDIBLE_BASE_URL`    | `https://api.incredible.one`  |
| `timeoutMs`   | —                        | `60_000`                      |
| `maxRetries`  | —                        | `2`                           |
| `streamThinkingMode` | — | `'mute'` (set `'default'` to mirror Anthropic reasoning stream) |

```ts
import { IncredibleClient } from '@incredible-ai/sdk';

const client = new IncredibleClient({
  apiKey: process.env.INCREDIBLE_API_KEY,
  baseUrl: process.env INCREDIBLE_BASE_URL,
  timeoutMs: 60_000,
  maxRetries: 2,
});
```

If you omit `model`, the SDK defaults to `small-1` (the only public model at the moment).

---

## Quick start
```ts
import { IncredibleClient } from '@incredible-ai/sdk';

const client = new IncredibleClient();

const response = await client.messages.create({
  model: 'small-1',
  max_tokens: 128,
  messages: [{ role: 'user', content: 'Give me three startup ideas.' }],
});

console.log(response.content.map((block) => block.text).join('\n'));
```

`response` exposes Anthropic-style fields (`tool_calls`, `stop_reason`, `usage`, etc.) and the raw payload (`response.raw`).

---

## Messages API
```ts
const response = await client.messages.create({
  model: 'small-1',
  max_tokens: 256,
  temperature: 0.3,
  messages: [
    { role: 'system', content: 'You are a helpful assistant.' },
    { role: 'user', content: 'List three fun activities in Stockholm.' },
  ],
});

response.content
  .filter((block) => block.type === 'text')
  .forEach((block) => console.log(block.text));

console.log('Token usage', response.token_usage);
```

---

## Function calling

Register tools using Anthropic’s schema (`parameters` / `input_schema`). The SDK converts them into Incredible’s JSON automatically and normalises the response back into Anthropic-style `tool_use` blocks.

### Manual control
```ts
import { IncredibleClient } from '@incredible-ai/sdk';

const client = new IncredibleClient();

const functions = [
  {
    name: 'calculate_sum',
    description: 'Add two numbers together',
    parameters: {
      type: 'object',
      properties: {
        a: { type: 'number' },
        b: { type: 'number' },
      },
      required: ['a', 'b'],
    },
  },
];

const initial = await client.messages.create({
  model: 'small-1',
  max_tokens: 64,
  messages: [{ role: 'user', content: 'What is 127 + 349?' }],
  functions,
});

for (const call of initial.tool_calls ?? []) {
  const result = call.arguments.a + call.arguments.b;

  const followUp = [
    { role: 'user', content: 'What is 127 + 349?' },
    {
      type: 'function_call',
      function_call_id: call.id,
      function_calls: [{ name: call.name, input: call.arguments }],
    },
    {
      type: 'function_call_result',
      function_call_id: call.id,
      function_call_results: [result],
    },
  ];

  const final = await client.messages.create({
    model: 'small-1',
    max_tokens: 128,
    messages: followUp,
    functions,
  });

  console.log(final.content);
}
```

### Automated helper flow
Let the helpers parse tool calls, execute your registry, and build follow-up messages.

```ts
import { IncredibleClient } from '@incredible-ai/sdk';
import { helpers } from '@incredible-ai/sdk/helpers';

const registry = new Map([
  ['calculate_sum', async ({ a, b }: { a: number; b: number }) => a + b],
]);

const messages = [{ role: 'user', content: 'Add 42 and 11.' }];

const initial = await client.messages.create({
  model: 'small-1',
  max_tokens: 64,
  messages,
  functions,
});

const plan = helpers.buildToolExecutionPlan(initial);
if (plan && !plan.isEmpty()) {
  const results = await Promise.all(
    plan.toolCalls.map(async (call) => {
      const fn = registry.get(call.name);
      if (!fn) throw new Error(`No tool named ${call.name}`);
      return fn(call.arguments as any);
    }),
  );

  const followUp = helpers.buildFollowUpMessages(messages, plan, results);
  const final = await client.messages.create({
    model: 'small-1',
    max_tokens: 128,
    messages: followUp,
    functions,
  });

  console.log(final.content);
}
```

### Beta tool runner
If you already use Anthropic’s `beta.messages.toolRunner`, you can swap in `IncredibleClient` and keep the rest.

```ts
import { IncredibleClient } from '@incredible-ai/sdk';
import { betaZodTool } from '@anthropic-ai/sdk/helpers/beta/zod';
import { z } from 'zod';

const client = new IncredibleClient();

const response = await client.beta.messages.toolRunner({
  messages: [{ role: 'user', content: 'What is the weather in SF?' }],
  tools: [
    betaZodTool({
      name: 'getWeather',
      description: 'Get the weather at a specific location',
      inputSchema: z.object({
        location: z.string().describe('The city and state, e.g. San Francisco, CA'),
      }),
      run: ({ location }) => `The weather is foggy with a temperature of 20°C in ${location}.`,
    }),
  ],
  model: 'claude-3-5-sonnet-latest',
  max_tokens: 1024,
});

console.log(response.content);
```

The SDK adapts Anthropic’s beta tool payloads to Incredible’s API on the way in and out.

---

## Streaming responses
```ts
const stream = await client.messages.stream({
  model: 'small-1',
  max_tokens: 256,
  messages: [{ role: 'user', content: 'Stream a short poem about the ocean.' }],
});

stream.on('message_start', (event) => {
  console.log('stream started for', event.message.model);
});

stream.on('content_block_delta', (event) => {
  if (event.delta.type === 'text_delta') {
    process.stdout.write(event.delta.text);
  }
});

stream.once('message_stop', () => {
  console.log('\nstream completed');
});

const finalMessage = await stream.finalMessage();
console.log('stop_reason:', finalMessage.stop_reason); // "end_turn" unless overridden
console.log('usage:', finalMessage.usage);

for await (const event of stream) {
  if (event.type === 'tool_call') {
    console.log('tool requested:', event.content.name);
  }
}

// Enable Anthropic-style "thinking" deltas:
const thinkingClient = new IncredibleClient({ streamThinkingMode: 'default' });
```

> **Tip:** `stream.receivedMessages` accumulates every resolved message turn—tool-use and final responses—matching Anthropic’s `MessageStream` behaviour.

---

## Token counting
```ts
const usage = await client.messages.countTokens({
  model: 'small-1',
  messages: [{ role: 'user', content: 'Summarise this 1,000 word article.' }],
  max_tokens: 1,
});

console.log(usage.token_usage);
```

> **Note:** `/v1/messages/count_tokens` is not yet live on the Incredible API. Expect a 404 until it ships.

---

## Text Completions

For simple text completion tasks (without chat structure):

```ts
const response = await client.completions({
  model: 'small-1',
  prompt: '2+2=',
  max_tokens: 5,
});

console.log(response.choices?.[0]?.text || response.text);
```

---

## Models API

List and inspect available models:

```ts
const models = await client.models.list();
const modelList = models.data || models.models || models;
const modelCount = Array.isArray(modelList) ? modelList.length : 0;

console.log(`Available models: ${modelCount}`);
if (Array.isArray(modelList) && modelList.length > 0) {
  console.log(`First model: ${modelList[0].id}`);
}
```

---

## Answer API

For straightforward question-answering:

```ts
const response = await client.answer({
  query: 'What is 2+2?',
});

console.log('Success:', response.success);
console.log('Answer:', response.answer);
```

### Structured Output

Extract data in a specific JSON schema:

```ts
const schema = {
  type: 'object',
  properties: {
    result: { type: 'number' },
    explanation: { type: 'string' },
  },
  required: ['result'],
};

const response = await client.answer({
  query: 'What is 10% of 100?',
  responseFormat: schema,
});

console.log('Data:', response.data);
```

---

## Conversation API

For multi-turn conversations with automatic context management:

```ts
const response = await client.conversation({
  messages: [
    { role: 'user', content: 'Hi' },
    { role: 'assistant', content: 'Hello!' },
    { role: 'user', content: 'How are you?' },
  ],
});

console.log('Success:', response.success);
console.log('Response:', response.response || response.message);
```

---

## Agent API

For autonomous agents that can plan and execute multiple tool calls:

```ts
const tools = [
  {
    name: 'calculator',
    description: 'Perform calculations',
    input_schema: {
      type: 'object',
      properties: {
        expression: { type: 'string' },
      },
      required: ['expression'],
    },
  },
];

const response = await client.agent({
  messages: [{ role: 'user', content: 'Calculate 5+5' }],
  tools,
  maxTokens: 512,
});

console.log('Response:', response.response || response.content?.[0]?.text);
if (response.tool_calls && response.tool_calls.length > 0) {
  console.log(`Tool calls: ${response.tool_calls.length}`);
  response.tool_calls.forEach((call) => {
    console.log(`  - ${call.name}: ${JSON.stringify(call.inputs || call.arguments)}`);
  });
}
```

---

## Web Search

Perform web searches with AI-powered result synthesis:

```ts
const response = await client.research({
  query: 'Python programming',
  num_results: 3,
});

if (response.success) {
  console.log(`Found ${response.results.length} results`);
  response.results.forEach((result) => {
    console.log(`- ${result.title}: ${result.url}`);
  });
}
```

---

## Deep Research

For in-depth research tasks:

```ts
const response = await client.research.deepResearch({
  instructions: 'Research the history of Python programming language',
});

if (response.success) {
  console.log('Research completed!');
  console.log(`Research ID: ${response.research_id || 'N/A'}`);
  console.log(`Citations: ${response.citations?.length || 0}`);
}
```

---

## Image Generation

Generate images from text descriptions:

```ts
const response = await client.images({
  prompt: 'A red circle',
  aspect_ratio: '1:1',
});

if (response.success) {
  console.log('Image generated!');
  console.log(`URL: ${response.image_url}`);
  console.log(`Seed: ${response.seed}`);
}
```

---

## Video Generation

Generate videos from text descriptions:

```ts
const response = await client.videos({
  prompt: 'Ocean waves',
  size: '1280x720',
});

if (response.success) {
  console.log('Video generated!');
  console.log(`Video ID: ${response.video_id}`);
  console.log(`Duration: ${response.duration}s`);
}
```

---

## OCR

Extract text from images and PDFs:

### Health Check

```ts
const response = await client.ocr.health();
console.log(`Status: ${response.status}`);
console.log(`OCR enabled: ${response.ocr_enabled}`);
```

### Image OCR

```ts
const response = await client.ocr.image({
  image_url: 'https://example.com/document.jpg',
});
console.log('Extracted Text:', response.text);
```

### PDF OCR

```ts
const response = await client.ocr.pdf({
  pdf_url: 'https://example.com/document.pdf',
  pages: '1-5',
});

console.log(`Pages processed: ${response.pages.length}`);
response.pages.forEach((page) => {
  console.log(`\n--- Page ${page.page_number} ---`);
  console.log(page.text);
});
```

---

## Cookbook compatibility

Validated against every scenario in **Incredible-API-Cookbook-main**:

- ✅ `01-getting-started/` – chat, streaming, integrations.
- ✅ `02-function-calling/` – multi-tool workflows, JSON extraction, RPG demos, etc.

---

## Integrations API
```ts
const integrations = await client.integrations.list();
console.log(integrations.map((integration) => integration.name));

const gmail = await client.integrations.retrieve('gmail');
console.log(gmail.features);

await client.integrations.connect('apollo', {
  api_key: process.env.APOLLO_API_KEY!,
  user_id: process.env.APOLLO_USER_ID,
});

const results = await client.integrations.execute('apollo', {
  feature_name: 'APOLLO_PEOPLE_SEARCH',
  inputs: { query: 'Sales Director Sweden' },
});

console.log(results);
```

---

## Error handling & debugging
- The HTTP client throws typed `Error` instances; the Incredible API error payload is attached when available.
- Inspect `response.raw` if you want the exact wire-level payload.
- `tool_calls` and `tool_results` help trace agentic workflows.
- For 5xx responses, log the request body—especially the `function_call_result` block—to cross-check with the cookbook examples.

---

## Helpers reference
```
makeToolCall(name, arguments, options?)
makeToolCalls([...])
makeToolResult(callId, result)
buildToolExecutionPlan(response)
buildFollowUpMessages(messages, plan, results)
ToolExecutionPlan, ToolExecution
```

Helpers live under `@incredible-ai/sdk/helpers` and mirror the names in the Python SDK.

---

## Examples
- `examples/basic-usage`