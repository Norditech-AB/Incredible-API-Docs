---
title: "Agent"
description: "Agentic conversation with tool calling. Returns tool calls for the caller to execute."
openapi: "POST /v1/agent"
---

## Examples

<CodeGroup>

```python Python SDK
from incredible_python import Incredible

client = Incredible()

tools = [
    {
        "name": "get_weather",
        "description": "Get weather information for a location",
        "input_schema": {
            "type": "object",
            "properties": {
                "location": {"type": "string", "description": "City name"}
            },
            "required": ["location"]
        }
    }
]

response = client.agent(
    messages=[{"role": "user", "content": "What is the weather in San Francisco?"}],
    tools=tools
)

# Check if tools were called
if response.tool_calls:
    for call in response.tool_calls:
        print(f"Tool: {call.name}, Inputs: {call.inputs}")
        # Execute tool here, then provide results back
else:
    print(response.content[0]['text'])
```

```ts TypeScript SDK
import { IncredibleClient } from '@incredible-ai/sdk';

const client = new IncredibleClient();

const response = await client.agent({
  messages: [
    { role: 'user', content: 'What is the weather in San Francisco?' }
  ],
  tools: [
    {
      name: 'get_weather',
      description: 'Get weather information for a location',
      input_schema: {
        type: 'object',
        properties: {
          location: { type: 'string', description: 'City name' }
        },
        required: ['location']
      }
    }
  ]
});

if (response.tool_calls) {
  response.tool_calls.forEach(call => {
    console.log(`Tool: ${call.name}, Inputs:`, call.inputs || call.arguments);
    // Execute tool here, then provide results back
  });
} else {
  console.log(response.response || response.content?.[0]?.text);
}
```

```bash cURL
curl -X POST "https://api.incredible.one/v1/agent" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "What is the weather in San Francisco?"}
    ],
    "tools": [
      {
        "name": "get_weather",
        "description": "Get weather information for a location",
        "input_schema": {
          "type": "object",
          "properties": {
            "location": {"type": "string", "description": "City name"}
          },
          "required": ["location"]
        }
      }
    ]
  }'
```

</CodeGroup>

## Parameters

- **messages** (required) — Conversation history
- **tools** (required) — List of tool definitions with `name`, `description`, and `input_schema`
- **system_prompt** (optional) — System prompt to guide the agent
- **stream** (optional) — Enable streaming response

## Response

```json
{
  "success": true,
  "response": "I'll check the weather in San Francisco for you.",
  "tool_calls": [
    {
      "id": "call_123",
      "name": "get_weather",
      "inputs": {
        "location": "San Francisco"
      }
    }
  ]
}
```

## Tool Execution Pattern

1. Agent returns tool calls
2. You execute the tools
3. Provide results back in the next request as assistant messages
4. Agent uses results to respond

## Using Files

Attach files to user messages using `file_ids`. Files are automatically processed and their content is included in the agent's context.

```python
response = client.agent(
    messages=[
        {
            "role": "user",
            "content": "Analyze this spreadsheet and create a summary",
            "file_ids": ["file-abc123"]  # Attach files to user messages
        }
    ],
    tools=tools
)
```

<Info>
**Upload Once, Reuse Forever**

Upload files using the [Files API](/api-reference/files/overview) once, then reuse the `file_id` across unlimited requests. No need to re-upload the same file.
</Info>
